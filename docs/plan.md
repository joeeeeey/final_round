## Implementation Plan — Interview Summary Prototype

### Goals
- Build a Next.js (App Router) prototype that ingests an interview QA transcript (mocked initially), invokes an LLM via Vercel AI SDK (through OpenRouter using the `google/gemini-flash-2.5` model), and renders an analysis timeline with highlights, lowlights, and key name entities.

### Tech Stack
- Next.js (App Router), React, TypeScript
- Vercel AI SDK with OpenRouter (OpenAI-compatible)
- Styling: Tailwind CSS
- Validation/schema: Zod (for typed LLM output)

### Environment & Dependencies
- Env vars
  - `OPENROUTER_API_KEY`: OpenRouter API key
  - Optional: `OPENROUTER_BASE_URL=https://openrouter.ai/api/v1`
- Dependencies (initial)
  - `next`, `react`, `react-dom`, `typescript`
  - `ai`, `@ai-sdk/openai`, `zod`
  - `tailwindcss`, `postcss`, `autoprefixer` (if using Tailwind)

### Acceptance Criteria (from PRD)
- Input: QA array with fields `timestamp`, `type` in {`question`,`answer`}, `content`, `role` in {`interviewer`,`interviewee`}.
- Output: Array of analysis items with `timestamp`, `key_name_entity`, `highlight`, `lowlight`, `summary`.
- UI: Render output as a timeline view (good first-version visual). Mocked input supported; analysis generated by LLM.

### Milestones and Tasks

1) Project Bootstrap
- Initialize Next.js (App Router) + TypeScript project.
- Add Tailwind (optional) or minimal CSS setup.
- Install `ai`, `@ai-sdk/openai`, and `zod`.
- Add `.env.example` documenting `OPENROUTER_API_KEY` and `OPENROUTER_BASE_URL`.
- Verify dev server runs.

2) Data Modeling and Mock Input
- Define types in `types/interview.ts`:
  - `QAItem`: `{ timestamp: string; type: 'question' | 'answer'; content: string; role: 'interviewer' | 'interviewee'; }`
  - `AnalysisItem`: `{ timestamp: string; key_name_entity: string; highlight: string; lowlight: string; summary: string; }`
- Create `data/mock-transcript.ts` exporting a mock array matching the PRD’s example QA set.
- Create `data/mock-analysis.ts` (optional) with a sample analysis array for quick UI development without LLM.

3) UI — Timeline (Initial Version)
- Page: `app/page.tsx`
  - Show a read-only preview of mocked QA input.
  - Button(s): "Use Mock Data" and "Analyze".
- Components:
  - `components/Timeline.tsx`: Accepts `AnalysisItem[]` and renders a vertical timeline.
  - `components/TimelineItem.tsx`: Renders a single item (timestamp, key entity, highlight/lowlight, summary).
- Styling: clean, readable, mobile-friendly.

4) LLM Analysis Service (Server)
- API Route: `app/api/analyze/route.ts`
  - Use Vercel AI SDK + OpenRouter via `@ai-sdk/openai`:
    - Create client with `baseURL: 'https://openrouter.ai/api/v1'` and `apiKey: process.env.OPENROUTER_API_KEY`.
    - Model: `google/gemini-flash-2.5`.
  - Input: `QAItem[]` in the request body.
  - Output: `AnalysisItem[]`.
  - Implementation approach:
    - Use `generateObject` with a Zod schema to strongly type the output shape and reduce post-processing.
    - Prompt includes: task description, input format, strict output schema, style/quality guidance.
  - Return JSON. Include minimal error handling and input validation.

5) Client Integration
- In `app/page.tsx`, add a client-side form to:
  - Toggle between mock data and pasted JSON.
  - Call `/api/analyze` and display loading/error states.
  - Render returned `AnalysisItem[]` using the Timeline components.
- Keep UX simple and fast; ensure empty states and errors are readable.

6) QA and Hardening
- Type-check and basic unit tests for simple utilities (if any) and schema parsing.
- Validate large or malformed inputs (graceful error messages).
- Basic rate limiting or debounce to avoid spamming the API during dev.

7) Deploy
- Deploy to Vercel.
- Set `OPENROUTER_API_KEY` (and optionally `OPENROUTER_BASE_URL`).
- Smoke test: run an analysis on the deployed site using the mock QA set pasted in.

### Prompts and Schemas (Sketch)
- Zod schema for output:
  - `z.object({ timestamp: z.string(), key_name_entity: z.string(), highlight: z.string(), lowlight: z.string(), summary: z.string() })`
  - `z.array(analysisItemSchema)`
- Prompt essentials:
  - System: "You analyze interview QA transcripts to extract a timeline of key entities, highlights, lowlights, and summaries. Respond only in JSON matching the provided schema."
  - User: include the QA array JSON and explicit instructions to follow the schema and preserve timestamps.

### Folder Structure (Planned)
- `app/`
  - `page.tsx`
  - `api/analyze/route.ts`
- `components/`
  - `Timeline.tsx`
  - `TimelineItem.tsx`
- `types/`
  - `interview.ts`
- `data/`
  - `mock-transcript.ts`
  - `mock-analysis.ts` (optional)
- `docs/`
  - `plan.md`

### Command Cheatsheet
- Create app: `npx create-next-app@latest` (App Router + TS)
- Install libs: `npm i ai @ai-sdk/openai zod`
- Tailwind (optional): `npm i -D tailwindcss postcss autoprefixer && npx tailwindcss init -p`

### Future Enhancements (Post-v1)
- Add upload support for files (text, SRT/VTT), multi-speaker diarization alignment.
- Persist sessions/results; shareable links.
- Advanced NER, keyword extraction, topic clustering.
- Model selection and temperature controls.


